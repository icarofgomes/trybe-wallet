(this["webpackJsonptrybe-wallet"]=this["webpackJsonptrybe-wallet"]||[]).push([[0],{34:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),s=n.n(c),i=n(21),l=(n(34),n(10)),o=n(2),d=n(14),u=n(8),h=n(9),j=n(6),b=n(12),p=n(11),x=n(3),O=n(17),m=n.n(O),v=n(22),f="GET_CURRENCIES",y="FAILED_REQUEST",g="GET_RATES",w="REMOVE_EXPENSE",C=function(e){return{type:y,payload:e}},k=n(1),E=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).state={email:"",password:"",redirect:!1},e.handleChange=e.handleChange.bind(Object(j.a)(e)),e.isValid=e.isValid.bind(Object(j.a)(e)),e.handleClick=e.handleClick.bind(Object(j.a)(e)),e}return Object(h.a)(n,[{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(d.a)({},n,a))}},{key:"isValid",value:function(){var e=this.state,t=e.email,n=e.password,a=t.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/i),r=n.length>5;if(a&&r)return!0}},{key:"handleClick",value:function(){var e=this.props.dispatchSetEmail,t=this.state.email;this.setState({redirect:!0}),e(t)}},{key:"render",value:function(){var e=this.state,t=e.email,n=e.password;return e.redirect?Object(k.jsx)(o.a,{to:"/trybe-wallet/carteira"}):Object(k.jsx)("div",{className:" flex w-screen h-screen justify-center bg-blue-900",children:Object(k.jsxs)("div",{className:"flex flex-col justify-center",children:[Object(k.jsx)("h1",{className:"mb-8 mx-auto text-white font-bold text-3xl",children:"TrybeWallet"}),Object(k.jsxs)("div",{className:"flex flex-col",children:[Object(k.jsx)("div",{className:"text-white font-bold text-lg",children:"Email"}),Object(k.jsx)("div",{children:Object(k.jsx)("label",{htmlFor:"input-email",children:Object(k.jsx)("input",{className:"rounded-sm",type:"email",name:"email",id:"input-email","data-testid":"email-input",onChange:this.handleChange,value:t})})})]}),Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{className:"text-white font-bold text-lg",children:"Senha"}),Object(k.jsx)("div",{children:Object(k.jsx)("label",{htmlFor:"input-password",children:Object(k.jsx)("input",{className:"rounded-sm",type:"text",name:"password",id:"input-password","data-testid":"password-input",onChange:this.handleChange,value:n})})})]}),Object(k.jsx)("button",{className:"my-4 w-2/6 bg-white mx-auto rounded font-bold hover:border-blue-600 border-2",type:"button",disabled:!this.isValid(),onClick:this.handleClick,children:"Entrar"})]})})}}]),n}(r.a.Component),S=Object(l.b)(null,(function(e){return{dispatchSetEmail:function(t){return e({type:"SET_EMAIL",payload:t})}}}))(E),N=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).state={currency:"BRL"},e.expensesSum=e.expensesSum.bind(Object(j.a)(e)),e}return Object(h.a)(n,[{key:"expensesSum",value:function(){var e=this.props.expenses;return 0===e.length?0:e.map((function(e){var t=e.value,n=e.currency;return e.exchangeRates[n].ask*t})).reduce((function(e,t){return e+t}))}},{key:"render",value:function(){var e=this.props.emailInput,t=this.expensesSum(),n=this.state.currency;return Object(k.jsxs)("div",{className:"bg-blue-900 text-white p-2 rounded",children:[Object(k.jsx)("h1",{className:"text-center text-2xl font-bold",children:"TRYBE WALLET"}),Object(k.jsx)("hr",{}),Object(k.jsx)("div",{className:"text-center mb-2","data-testid":"email-field",children:e}),Object(k.jsxs)("div",{className:"text-lg","data-testid":"total-field",children:[Object(k.jsx)("span",{className:"mr-1",children:"Despesas:"}),t.toFixed(2),Object(k.jsx)("span",{className:"ml-1","data-testid":"header-currency-field",children:n})]})]})}}]),n}(r.a.Component),R=Object(l.b)((function(e){return{emailInput:e.user.email,expenses:e.wallet.expenses}}))(N),T={value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},M=["Dinheiro","Cart\xe3o de cr\xe9dito","Cart\xe3o de d\xe9bito"],D=["Alimenta\xe7\xe3o","Lazer","Trabalho","Transporte","Sa\xfade"],A=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).state=T,e.handleChange=e.handleChange.bind(Object(j.a)(e)),e.updateRates=e.updateRates.bind(Object(j.a)(e)),e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.fetchCurrency)()}},{key:"handleChange",value:function(e){var t=e.target,n=t.id,a=t.value;this.setState(Object(d.a)({},n,a))}},{key:"updateRates",value:function(){var e=this.props,t=e.fetchRate,n=e.expenses.length;t(this.state,n),this.setState(T)}},{key:"render",value:function(){var e=this.props.currencies,t=this.state,n=t.value,a=t.description,r=t.currency,c=t.method,s=t.tag;return e?Object(k.jsxs)("form",{className:"flex flex-col bg-blue-900 text-white p-2",children:[Object(k.jsxs)("label",{htmlFor:"value",children:["Valor",Object(k.jsx)("input",{type:"number",id:"value",value:n,onChange:this.handleChange})]}),Object(k.jsxs)("label",{htmlFor:"description",children:["Descri\xe7\xe3o",Object(k.jsx)("input",{type:"text",id:"description",value:a,onChange:this.handleChange})]}),Object(k.jsxs)("label",{htmlFor:"currency",children:["Moeda",Object(k.jsx)("select",{id:"currency",value:r,onChange:this.handleChange,children:e.map((function(e){return Object(k.jsx)("option",{children:e},e)}))})]}),Object(k.jsxs)("label",{htmlFor:"method",children:["M\xe9todo de Pagamento",Object(k.jsx)("select",{id:"method",value:c,onChange:this.handleChange,children:M.map((function(e,t){return Object(k.jsx)("option",{children:e},t)}))})]}),Object(k.jsxs)("label",{htmlFor:"tag",children:["Tag",Object(k.jsx)("select",{id:"tag",value:s,onChange:this.handleChange,children:D.map((function(e,t){return Object(k.jsx)("option",{children:e},t)}))})]}),Object(k.jsx)("button",{type:"button",onClick:this.updateRates,children:"Adicionar despesa"})]}):Object(k.jsx)("p",{children:"Loading..."})}}]),n}(r.a.Component),F=Object(l.b)((function(e){return{currencies:e.wallet.currencies,expenses:e.wallet.expenses}}),(function(e){return{fetchCurrency:function(){return e(function(){var e=Object(v.a)(m.a.mark((function e(t){var n,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,r=Object.keys(a).filter((function(e){return"USDT"!==e})),e.abrupt("return",t({type:f,payload:r}));case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",t(C(e.t0)));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())},fetchRate:function(t,n){return e(function(e,t){return function(){var n=Object(v.a)(m.a.mark((function n(a){var r,c,s;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:return r=n.sent,n.next=6,r.json();case 6:return c=n.sent,s=Object(x.a)(Object(x.a)({},e),{},{exchangeRates:c,id:t}),n.abrupt("return",a({type:g,payload:s}));case 11:return n.prev=11,n.t0=n.catch(0),n.abrupt("return",a(C(n.t0)));case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))}}}))(A),B=["Descri\xe7\xe3o","Tag","M\xe9todo de pagamento","Valor","Moeda","C\xe2mbio utilizado","Valor convertido","Moeda de convers\xe3o","Editar/Excluir"],L=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).deleteButton=e.deleteButton.bind(Object(j.a)(e)),e}return Object(h.a)(n,[{key:"deleteButton",value:function(e){var t=this.props,n=t.expenses;(0,t.deleteExpense)(n.filter((function(t){return t.id!==e})))}},{key:"render",value:function(){var e=this,t=this.props.expenses;return 0===t.length?Object(k.jsx)("div",{children:"Ainda n\xe3o temos despesas registradas!"}):Object(k.jsx)("div",{children:Object(k.jsxs)("table",{children:[Object(k.jsx)("tr",{children:B.map((function(e,t){return Object(k.jsx)("th",{children:e},t)}))}),t.map((function(t){var n=t.description,a=t.tag,r=t.method,c=t.value,s=t.currency,i=t.exchangeRates,l=t.id;return Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{children:n}),Object(k.jsx)("td",{children:a}),Object(k.jsx)("td",{children:r}),Object(k.jsx)("td",{children:c}),Object(k.jsx)("td",{children:i[s].name.split("/")[0]}),Object(k.jsx)("td",{children:Math.round(100*i[s].ask)/100}),Object(k.jsx)("td",{children:Math.round(i[s].ask*c*100)/100}),Object(k.jsx)("td",{children:"Real"}),Object(k.jsxs)("td",{children:[Object(k.jsx)("button",{type:"button",onClick:function(){return e.deleteButton(l)},"data-testid":"delete-btn",children:"Excluir"}),Object(k.jsx)("button",{type:"button",children:"Editar"})]})]},l)}))]})})}}]),n}(r.a.Component),V=Object(l.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{deleteExpense:function(t){return e(function(e){return{type:w,payload:e}}(t))}}}))(L),I=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(k.jsxs)("div",{children:[Object(k.jsx)(R,{}),Object(k.jsx)(F,{}),Object(k.jsx)(V,{})]})}}]),n}(r.a.Component),_=I;var W=function(){return Object(k.jsx)("div",{children:Object(k.jsxs)(o.d,{children:[Object(k.jsx)(o.b,{exact:!0,path:"/trybe-wallet",component:S}),Object(k.jsx)(o.b,{path:"/trybe-wallet/carteira",component:_})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=n(15),z=n(27),G=n(28),J={email:""},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;return"SET_EMAIL"===t.type?Object(x.a)(Object(x.a)({},e),{},{email:t.payload}):e},$=n(29),Q={currencies:[],expenses:[]},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case f:return Object(x.a)(Object(x.a)({},e),{},{currencies:a});case y:return Object(x.a)(Object(x.a)({},e),{},{error:a});case g:return Object(x.a)(Object(x.a)({},e),{},{expenses:[].concat(Object($.a)(e.expenses),[Object(x.a)({},a)])});case w:return Object(x.a)(Object(x.a)({},e),{},{expenses:a});default:return e}},Y=Object(U.combineReducers)({user:P,wallet:X}),q=Object(U.createStore)(Y,Object(z.composeWithDevTools)(Object(U.applyMiddleware)(G.a)));s.a.render(Object(k.jsx)(i.a,{children:Object(k.jsx)(l.a,{store:q,children:Object(k.jsx)(W,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.60c89bd1.chunk.js.map