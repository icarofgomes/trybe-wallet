(this["webpackJsonptrybe-wallet"]=this["webpackJsonptrybe-wallet"]||[]).push([[0],{34:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),s=n.n(c),i=n(21),l=(n(34),n(12)),d=n(2),o=n(14),u=n(4),b=n(5),h=n(10),j=n(7),p=n(6),x=n(3),m=n(17),O=n.n(m),f=n(22),v="GET_CURRENCIES",y="FAILED_REQUEST",g="GET_RATES",w="REMOVE_EXPENSE",C=function(e){return{type:y,payload:e}},N=n(1),k=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).state={email:"",password:"",redirect:!1},e.handleChange=e.handleChange.bind(Object(h.a)(e)),e.isValid=e.isValid.bind(Object(h.a)(e)),e.handleClick=e.handleClick.bind(Object(h.a)(e)),e}return Object(b.a)(n,[{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(o.a)({},n,a))}},{key:"isValid",value:function(){var e=this.state,t=e.email,n=e.password,a=t.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/i),r=n.length>5;if(a&&r)return!0}},{key:"handleClick",value:function(){var e=this.props.dispatchSetEmail,t=this.state.email;this.setState({redirect:!0}),e(t)}},{key:"render",value:function(){var e=this.state,t=e.email,n=e.password;return e.redirect?Object(N.jsx)(d.a,{to:"/trybe-wallet/carteira"}):Object(N.jsx)("div",{className:" flex w-screen h-screen justify-center bg-blue-900",children:Object(N.jsxs)("div",{className:"flex flex-col justify-center",children:[Object(N.jsx)("h1",{className:"mb-8 mx-auto text-white font-bold text-3xl",children:"TrybeWallet"}),Object(N.jsxs)("div",{className:"flex flex-col",children:[Object(N.jsx)("div",{className:"text-white font-bold text-lg",children:"Email"}),Object(N.jsx)("div",{children:Object(N.jsx)("label",{htmlFor:"input-email",children:Object(N.jsx)("input",{className:"rounded-sm",type:"email",name:"email",id:"input-email","data-testid":"email-input",onChange:this.handleChange,value:t})})})]}),Object(N.jsxs)("div",{children:[Object(N.jsx)("div",{className:"text-white font-bold text-lg",children:"Senha"}),Object(N.jsx)("div",{children:Object(N.jsx)("label",{htmlFor:"input-password",children:Object(N.jsx)("input",{className:"rounded-sm",type:"text",name:"password",id:"input-password","data-testid":"password-input",onChange:this.handleChange,value:n})})})]}),Object(N.jsx)("button",{className:"my-4 w-2/6 bg-white mx-auto rounded font-bold hover:border-blue-600 border-2",type:"button",disabled:!this.isValid(),onClick:this.handleClick,children:"Entrar"})]})})}}]),n}(r.a.Component),E=Object(l.b)(null,(function(e){return{dispatchSetEmail:function(t){return e({type:"SET_EMAIL",payload:t})}}}))(k),S={value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},R=["Dinheiro","Cart\xe3o de cr\xe9dito","Cart\xe3o de d\xe9bito"],T=["Alimenta\xe7\xe3o","Lazer","Trabalho","Transporte","Sa\xfade"],B=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).state=S,e.handleChange=e.handleChange.bind(Object(h.a)(e)),e.updateRates=e.updateRates.bind(Object(h.a)(e)),e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.fetchCurrency)()}},{key:"handleChange",value:function(e){var t=e.target,n=t.id,a=t.value;this.setState(Object(o.a)({},n,a))}},{key:"updateRates",value:function(){var e=this.props,t=e.fetchRate,n=e.expenses.length;t(this.state,n),this.setState(S)}},{key:"render",value:function(){var e=this.props.currencies,t=this.state,n=t.value,a=t.description,r=t.currency,c=t.method,s=t.tag;return e?Object(N.jsxs)("form",{className:"flex flex-col bg-blue-900 text-white p-2",children:[Object(N.jsx)(_,{field:"value",type:"number",value:n,handleChange:this.handleChange}),Object(N.jsx)(_,{field:"description",type:"text",value:a,handleChange:this.handleChange}),Object(N.jsx)(z,{field:"currency",value:r,handleChange:this.handleChange,array:e}),Object(N.jsx)(z,{field:"method",value:c,handleChange:this.handleChange,array:R}),Object(N.jsx)(z,{field:"tag",value:s,handleChange:this.handleChange,array:T}),Object(N.jsx)("button",{className:"my-4 w-3/6 bg-white mx-auto rounded font-bold hover:border-blue-600 border-2 text-black",type:"button",onClick:this.updateRates,children:"Adicionar despesa"})]}):Object(N.jsx)("p",{children:"Loading..."})}}]),n}(r.a.Component),L=Object(l.b)((function(e){return{currencies:e.wallet.currencies,expenses:e.wallet.expenses}}),(function(e){return{fetchCurrency:function(){return e(function(){var e=Object(f.a)(O.a.mark((function e(t){var n,a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,r=Object.keys(a).filter((function(e){return"USDT"!==e})),e.abrupt("return",t({type:v,payload:r}));case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",t(C(e.t0)));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())},fetchRate:function(t,n){return e(function(e,t){return function(){var n=Object(f.a)(O.a.mark((function n(a){var r,c,s;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:return r=n.sent,n.next=6,r.json();case 6:return c=n.sent,s=Object(x.a)(Object(x.a)({},e),{},{exchangeRates:c,id:t}),n.abrupt("return",a({type:g,payload:s}));case 11:return n.prev=11,n.t0=n.catch(0),n.abrupt("return",a(C(n.t0)));case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))}}}))(B),M=["Descri\xe7\xe3o","Tag","M\xe9todo de pagamento","Valor","Moeda","C\xe2mbio utilizado","Valor convertido","Moeda de convers\xe3o","Editar/Excluir"],A=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).deleteButton=e.deleteButton.bind(Object(h.a)(e)),e}return Object(b.a)(n,[{key:"deleteButton",value:function(e){var t=this.props,n=t.expenses;(0,t.deleteExpense)(n.filter((function(t){return t.id!==e})))}},{key:"render",value:function(){var e=this,t=this.props.expenses;return 0===t.length?Object(N.jsx)("div",{className:"text-center mt-2",children:"Ainda n\xe3o temos despesas registradas!"}):Object(N.jsx)("div",{children:Object(N.jsxs)("table",{children:[Object(N.jsx)("tr",{className:"hidden",children:M.map((function(e,t){return Object(N.jsx)("th",{children:e},t)}))}),t.map((function(t,n){var a=t.description,r=t.tag,c=t.method,s=t.value,i=t.currency,l=t.exchangeRates,d=t.id;return Object(N.jsxs)("tr",{className:"".concat(n%2===0?"bg-gray-100":"bg-blue-200"," flex flex-col\n                      w-screen items-center"),children:[Object(N.jsx)("td",{className:"text-3xl font-bold mt-4 mb-0 pb-0",children:(l[i].ask*s).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),Object(N.jsx)("td",{className:"text-sm pt-0 mt-0",children:a}),Object(N.jsx)("td",{className:"mb-4 font-bold text-sm bg-yellow-100 p-1 rounded border-1 border-black border-solid shadow-md",children:r}),Object(N.jsxs)("td",{className:"flex justify-between w-2/3",children:[Object(N.jsx)("span",{className:"font-bold md:hidden",children:"Method:"}),c]}),Object(N.jsxs)("td",{className:"flex justify-between w-2/3",children:[Object(N.jsx)("span",{className:"font-bold md:hidden",children:"Value:"}),s]}),Object(N.jsxs)("td",{className:"flex justify-between w-2/3",children:[Object(N.jsx)("span",{className:"font-bold md:hidden",children:"Currency:"}),l[i].name.split("/")[0]]}),Object(N.jsxs)("td",{className:"flex justify-between w-2/3 mb-4",children:[Object(N.jsx)("span",{className:"font-bold md:hidden",children:"Exchange Rate:"}),Math.round(100*l[i].ask)/100]}),Object(N.jsx)("td",{children:Object(N.jsx)("button",{className:"bg-red-400 border-2 border-red-900 rounded p-1 mb-2 text-red-900 font-bold",type:"button",onClick:function(){return e.deleteButton(d)},"data-testid":"delete-btn",children:"Excluir"})})]},d)}))]})})}}]),n}(r.a.Component),D=Object(l.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{deleteExpense:function(t){return e(function(e){return{type:w,payload:e}}(t))}}}))(A),V=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).state={currency:"BRL"},e.expensesSum=e.expensesSum.bind(Object(h.a)(e)),e}return Object(b.a)(n,[{key:"expensesSum",value:function(){var e=this.props.expenses;return 0===e.length?0:e.map((function(e){var t=e.value,n=e.currency;return e.exchangeRates[n].ask*t})).reduce((function(e,t){return e+t}))}},{key:"render",value:function(){var e=this.props.emailInput,t=this.expensesSum(),n=this.state.currency;return Object(N.jsxs)("div",{className:"bg-blue-900 text-white p-2 rounded",children:[Object(N.jsx)("h1",{className:"text-center text-2xl font-bold",children:"TRYBE WALLET"}),Object(N.jsx)("hr",{}),Object(N.jsx)("div",{className:"text-center mb-2","data-testid":"email-field",children:e}),Object(N.jsxs)("div",{className:"text-lg","data-testid":"total-field",children:[Object(N.jsx)("span",{className:"mr-1",children:"Expenses:"}),t.toFixed(2),Object(N.jsx)("span",{className:"ml-1","data-testid":"header-currency-field",children:n})]})]})}}]),n}(r.a.Component),I=Object(l.b)((function(e){return{emailInput:e.user.email,expenses:e.wallet.expenses}}))(V),F=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.field,n=e.type,a=e.value,r=e.handleChange;return Object(N.jsxs)("div",{className:"flex justify-between mr-2",children:[Object(N.jsx)("div",{className:"capitalize font-bold",children:t}),Object(N.jsx)("div",{className:"w-36",children:Object(N.jsx)("label",{className:"flex justify-end",htmlFor:t,children:Object(N.jsx)("input",{className:"bg-gray-200 text-black mb-1 w-full rounded",type:n,id:t,value:a,onChange:r})})})]})}}]),n}(a.Component),_=F,W=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.field,n=e.value,a=e.handleChange,r=e.array;return Object(N.jsxs)("div",{className:"flex justify-between mr-2",children:[Object(N.jsx)("div",{className:"capitalize font-bold",children:t}),Object(N.jsx)("div",{className:"w-36",children:Object(N.jsx)("label",{className:"flex justify-end",htmlFor:t,children:Object(N.jsx)("select",{className:"bg-gray-200 text-black mb-1 w-full rounded h-6",id:t,value:n,onChange:a,children:r.map((function(e,t){return Object(N.jsx)("option",{children:e},t)}))})})})]})}}]),n}(a.Component),z=W,U=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return Object(N.jsxs)("div",{children:[Object(N.jsx)(I,{}),Object(N.jsx)(L,{}),Object(N.jsx)(D,{})]})}}]),n}(r.a.Component),G=U;var J=function(){return Object(N.jsx)("div",{children:Object(N.jsxs)(d.d,{children:[Object(N.jsx)(d.b,{exact:!0,path:"/trybe-wallet",component:E}),Object(N.jsx)(d.b,{path:"/trybe-wallet/carteira",component:G})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $=n(15),P=n(27),Q=n(28),X={email:""},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;return"SET_EMAIL"===t.type?Object(x.a)(Object(x.a)({},e),{},{email:t.payload}):e},q=n(29),H={currencies:[],expenses:[]},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case v:return Object(x.a)(Object(x.a)({},e),{},{currencies:a});case y:return Object(x.a)(Object(x.a)({},e),{},{error:a});case g:return Object(x.a)(Object(x.a)({},e),{},{expenses:[].concat(Object(q.a)(e.expenses),[Object(x.a)({},a)])});case w:return Object(x.a)(Object(x.a)({},e),{},{expenses:a});default:return e}},Z=Object($.combineReducers)({user:Y,wallet:K}),ee=Object($.createStore)(Z,Object(P.composeWithDevTools)(Object($.applyMiddleware)(Q.a)));s.a.render(Object(N.jsx)(i.a,{children:Object(N.jsx)(l.a,{store:ee,children:Object(N.jsx)(J,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.13aae85b.chunk.js.map